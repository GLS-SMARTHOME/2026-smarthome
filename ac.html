<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AC Curve Gauge 2026</title>
    <style>
        :root {
            --primary-color: #00d4ff; /* Cold por padrão */
            --bg-card: #ffffff;
        }

        body {
            background: #eef2f5;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            font-family: 'Segoe UI', sans-serif;
            margin: 0;
        }

        .ac-container {
            background: var(--bg-card);
            padding: 40px;
            border-radius: 50px;
            box-shadow: 0 30px 60px rgba(0,0,0,0.1);
            text-align: center;
            width: 320px;
            position: relative;
        }

        /* SVG Gauge e Slider Curvo */
        .gauge-wrapper {
            position: relative;
            width: 250px;
            height: 180px;
            margin: 0 auto;
        }

        svg { width: 100%; height: 100%; overflow: visible; }
        
        .track { fill: none; stroke: #f0f0f0; stroke-width: 12; stroke-linecap: round; }
        .progress { 
            fill: none; 
            stroke: var(--primary-color); 
            stroke-width: 12; 
            stroke-linecap: round; 
            stroke-dasharray: 251.2; /* Circunferência total do arco */
            stroke-dashoffset: 251.2;
            transition: stroke-dashoffset 0.1s ease, stroke 0.4s;
        }

        /* O botão "bolinha" que desliza na curva */
        .handle {
            fill: white;
            stroke: var(--primary-color);
            stroke-width: 4;
            cursor: pointer;
            filter: drop-shadow(0 4px 6px rgba(0,0,0,0.2));
            transition: stroke 0.4s;
        }

        .temp-text {
            position: absolute;
            top: 60%;
            left: 50%;
            transform: translate(-50%, -50%);
        }

        #temp-num { font-size: 4rem; font-weight: 800; color: #333; display: block; }
        .unit { font-size: 1.5rem; color: #888; vertical-align: top; }

        /* Botões de Modo */
        .mode-selector {
            display: flex;
            justify-content: space-between;
            margin-top: 20px;
            background: #f8f9fa;
            padding: 8px;
            border-radius: 25px;
        }

        .btn {
            flex: 1;
            border: none;
            padding: 12px;
            border-radius: 20px;
            cursor: pointer;
            font-weight: bold;
            transition: 0.3s;
            background: transparent;
            color: #666;
        }

        .btn.active {
            background: white;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
        }

        .btn-cold.active { color: #00d4ff; }
        .btn-heat.active { color: #ff8c00; }
    </style>
</head>
<body>

<div class="ac-container">
    <div class="gauge-wrapper">
        <svg viewBox="0 0 120 100">
            <!-- Caminho da curva (Arco de 180 graus) -->
            <path id="curve" class="track" d="M20,80 A40,40 0 1,1 100,80" />
            <path id="progress-bar" class="progress" d="M20,80 A40,40 0 1,1 100,80" />
            <!-- Botão deslizante -->
            <circle id="knob" class="handle" r="6" cx="20" cy="80" />
        </svg>

        <div class="temp-text">
            <span id="temp-num">22</span><span class="unit">°C</span>
        </div>
    </div>

    <div class="mode-selector">
        <button id="coldBtn" class="btn btn-cold active" onclick="setMode('cold')">COLD</button>
        <button id="heatBtn" class="btn btn-heat" onclick="setMode('heat')">HEAT</button>
    </div>
</div>

<script>
    const knob = document.getElementById('knob');
    const progressBar = document.getElementById('progress-bar');
    const curve = document.getElementById('curve');
    const tempNum = document.getElementById('temp-num');
    const pathLength = curve.getTotalLength();

    let isDragging = false;

    // Função para atualizar a posição do medidor e o valor
    function updateGauge(point) {
        const bbox = curve.parentElement.getBoundingClientRect();
        const x = point.clientX - bbox.left;
        const y = point.clientY - bbox.top;

        // Lógica simplificada para encontrar o ponto mais próximo na curva
        let bestPoint = curve.getPointAtLength(0);
        let minDistance = Infinity;
        let bestLen = 0;

        for (let i = 0; i <= pathLength; i += 2) {
            const p = curve.getPointAtLength(i);
            const dist = Math.sqrt((p.x * (bbox.width/120) - x)**2 + (p.y * (bbox.height/100) - y)**2);
            if (dist < minDistance) {
                minDistance = dist;
                bestPoint = p;
                bestLen = i;
            }
        }

        // Atualiza visual
        knob.setAttribute('cx', bestPoint.x);
        knob.setAttribute('cy', bestPoint.y);
        
        const pct = bestLen / pathLength;
        progressBar.style.strokeDashoffset = pathLength - (pct * pathLength);
        
        // Mapeia valor entre 16 e 30 graus
        const temp = Math.round(16 + (pct * 14));
        tempNum.innerText = temp;
    }

    // Eventos de Mouse/Touch
    const startDrag = () => isDragging = true;
    const stopDrag = () => isDragging = false;
    const doDrag = (e) => {
        if (!isDragging) return;
        const event = e.touches ? e.touches[0] : e;
        updateGauge(event);
    };

    knob.addEventListener('mousedown', startDrag);
    window.addEventListener('mouseup', stopDrag);
    window.addEventListener('mousemove', doDrag);
    
    knob.addEventListener('touchstart', startDrag);
    window.addEventListener('touchend', stopDrag);
    window.addEventListener('touchmove', doDrag);

    // Mudança de Modo (Cores)
    function setMode(mode) {
        const root = document.documentElement;
        const coldBtn = document.getElementById('coldBtn');
        const heatBtn = document.getElementById('heatBtn');

        if (mode === 'cold') {
            root.style.setProperty('--primary-color', '#00d4ff');
            coldBtn.classList.add('active');
            heatBtn.classList.remove('active');
        } else {
            root.style.setProperty('--primary-color', '#ff8c00');
            heatBtn.classList.add('active');
            coldBtn.classList.remove('active');
        }
    }

    // Inicialização na temperatura 22
    window.onload = () => {
        const initialLen = ((22 - 16) / 14) * pathLength;
        const p = curve.getPointAtLength(initialLen);
        knob.setAttribute('cx', p.x);
        knob.setAttribute('cy', p.y);
        progressBar.style.strokeDashoffset = pathLength - initialLen;
    };
</script>

</body>
</html>
