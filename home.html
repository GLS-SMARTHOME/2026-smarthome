<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Home Control iOS 19</title>
<style>
:root {
  --ios-system-bg: #000000; 
  --ios-secondary-bg: #1C1C1E; 
  --ios-active-blue: #32ADE6;
  --ios-label: #FFFFFF; 
  --ios-active-label: #000000;
}
body { 
  font-family: -apple-system, BlinkMacSystemFont, 'SF Pro Display', sans-serif; 
  background: var(--ios-system-bg); 
  color: var(--ios-label); 
  margin:0; 
  padding:40px 24px; 
  display:flex; 
  justify-content:center; 
}
.container { width:100%; max-width:400px; }
h1 { font-size:34px; font-weight:700; margin-bottom:28px; letter-spacing:-0.5px; }
.grid { display:grid; grid-template-columns:1fr 1fr; gap:12px; }
.tile { 
  background: var(--ios-secondary-bg); 
  border-radius:16px; 
  padding:16px; 
  height:100px; 
  display:flex; 
  flex-direction:column; 
  justify-content:space-between; 
  cursor:pointer; 
  text-decoration:none; 
  color: var(--ios-label); 
  transition: transform 0.1s, background 0.2s; 
}
.tile:active { transform: scale(0.96); }
.icon-wrap { 
  width:36px; height:36px; 
  display:flex; 
  align-items:center; 
  justify-content:center; 
  border-radius:50%; 
  background: rgba(255,255,255,0.1); 
  font-size:20px; 
  color: var(--ios-active-blue); 
  transition: background 0.2s, color 0.2s; 
}
.label { 
  font-weight:600; 
  font-size:15px; 
  text-align:left; 
  color:var(--ios-label); 
  transition:color 0.2s; 
}
.tv-icon { 
  width:24px; height:18px; 
  border:2px solid currentColor; 
  border-radius:2px; 
  position:relative; 
}
.tv-icon::after { 
  content:''; 
  position:absolute; 
  bottom:-4px; 
  left:50%; 
  transform:translateX(-50%); 
  width:6px; 
  height:2px; 
  background:currentColor; 
}
</style>
</head>
<body>
<div class="container">
<h1>Ma maison</h1>
<div class="grid">

<!-- TV -->
<a href="https://www.congopokemon.store/2026-smarthome/tv" class="tile" onclick="return navigateWithTimeout(this.href)">
  <div class="icon-wrap"><div class="tv-icon"></div></div>
  <span class="label">T√âL√â SALON</span>
</a>
  
<a href="https://www.congopokemon.store/2026-smarthome/tv" class="tile" onclick="return navigateWithTimeout(this.href)">
  <div class="icon-wrap"><div class="tv-icon"></div></div>
  <span class="label">T√âL√â CHAMBRE</span>
</a>

<!-- AC -->
<a href="https://www.congopokemon.store/2026-smarthome/ac" class="tile" onclick="return navigateWithTimeout(this.href)">
  <div class="icon-wrap">‚ùÑÔ∏è</div>
  <span class="label">CLIM SALON</span>
</a>
  
<a href="https://www.congopokemon.store/2026-smarthome/ac" class="tile" onclick="return navigateWithTimeout(this.href)">
  <div class="icon-wrap">‚ùÑÔ∏è</div>
  <span class="label">CLIM CHAMBRE</span>
</a>

<!-- Lights -->
<a href="https://www.congopokemon.store/2026-smarthome/lights" class="tile" onclick="return navigateWithTimeout(this.href)">
  <div class="icon-wrap">üí°</div>
  <span class="label">LUMI√àRES</span>
</a>
<a href="#" class="tile" onclick="toggleDoorChoice(); return false;">
  <div class="icon-wrap" id="door-icon">üîí</div>
  <span class="label">SERRURE</span>
</a>



<!-- Scene Buttons -->
<a href="#" class="tile" onclick="activateScene('MATIN'); return false;">
  <div class="icon-wrap">‚òÄÔ∏è</div>
  <span class="label">SC√àNE MATIN</span>
</a>

<a href="#" class="tile" onclick="activateScene('AU REVOIR'); return false;">
  <div class="icon-wrap">üö™</div>
  <span class="label">SC√àNE AU REVOIR</span>
</a>

</div>
</div>

<script>
// Door toggle
function toggleDoorChoice() {
  // Create overlay
  const overlay = document.createElement('div');
  overlay.style.cssText = `
    position: fixed;
    inset: 0;
    background: rgba(0,0,0,0.4);
    display: flex;
    align-items: center;
    justify-content: center;
    z-index: 9999;
  `;

  // Dismiss if clicked outside popup
  overlay.addEventListener('click', (e) => {
    if (e.target === overlay) overlay.remove();
  });

  // Create popup container
  const popup = document.createElement('div');
  popup.style.cssText = `
    background: var(--ios-secondary-bg);
    padding: 20px;
    border-radius: 16px;
    width: 280px;
    text-align: center;
    display: flex;
    flex-direction: column;
    gap: 12px;
    box-shadow: 0 10px 30px rgba(0,0,0,0.3);
  `;

  // Title
  const title = document.createElement('div');
  title.textContent = "SERRURE";
  title.style.fontWeight = '600';
  title.style.fontSize = '18px';
  popup.appendChild(title);

  // Message
  const msg = document.createElement('div');
  msg.textContent = "Que voulez-vous faire ?";
  msg.style.fontSize = '15px';
  msg.style.color = '#ccc';
  popup.appendChild(msg);

  // Buttons container
  const btnContainer = document.createElement('div');
  btnContainer.style.display = 'flex';
  btnContainer.style.justifyContent = 'space-between';

  // Lock button
  const lockBtn = document.createElement('button');
  lockBtn.textContent = "üîí Verrouiller";
  lockBtn.style.cssText = `
    flex: 1;
    margin-right: 6px;
    padding: 10px;
    border-radius: 12px;
    border: none;
    background: var(--ios-active-blue);
    color: var(--ios-active-label);
    font-weight: 600;
    cursor: pointer;
  `;
  lockBtn.onclick = () => { setDoor(true); overlay.remove(); };

  // Unlock button
  const unlockBtn = document.createElement('button');
  unlockBtn.textContent = "üîì D√©verrouiller";
  unlockBtn.style.cssText = `
    flex: 1;
    margin-left: 6px;
    padding: 10px;
    border-radius: 12px;
    border: none;
    background: var(--ios-active-label);
    color: var(--ios-system-bg);
    font-weight: 600;
    cursor: pointer;
  `;
  unlockBtn.onclick = () => { setDoor(false); overlay.remove(); };

  btnContainer.appendChild(lockBtn);
  btnContainer.appendChild(unlockBtn);
  popup.appendChild(btnContainer);
  overlay.appendChild(popup);
  document.body.appendChild(overlay);
}

// Set door state
let doorLocked = true;
function setDoor(locked) {
  doorLocked = locked;
  const icon = document.getElementById('door-icon');
  icon.textContent = doorLocked ? 'üîí' : 'üîì';
  icon.classList.toggle('unlocked', !doorLocked);

  showDoorPopup(doorLocked ? "Verrouill√© üîí" : "D√©verrouill√© üîì");
}

// Popup feedback
function showDoorPopup(message) {
  const popup = document.createElement('div');
  popup.textContent = message;
  popup.style.cssText = `
    position: fixed;
    top: 20%;
    left: 50%;
    transform: translateX(-50%);
    background: var(--ios-active-blue);
    color: var(--ios-active-label);
    padding: 12px 24px;
    border-radius: 12px;
    font-weight: 600;
    font-size: 16px;
    z-index: 9999;
    opacity: 0;
    transition: opacity 0.3s ease-in-out;
  `;
  document.body.appendChild(popup);
  requestAnimationFrame(() => popup.style.opacity = 1);
  setTimeout(() => {
    popup.style.opacity = 0;
    setTimeout(() => popup.remove(), 300);
  }, 1500);
}



// Scene activation
function activateScene(sceneName) {
  alert(sceneName + " activ√©e !");
  // Here you can add code to send command to ESP32 or smart home backend
}

// Universal navigation with timeout
function navigateWithTimeout(url) {
  event.preventDefault();
  window.open(url, "_self");
  setTimeout(() => {
    if (window.location.href !== url) {
      window.location.href = "/"; // main dashboard page
    }
  }, 5000); // 5 seconds timeout
  return false;
}

// Global page timeout: go back home if page unresponsive
const PAGE_TIMEOUT_MS = 5000;
let pageTimeout = setTimeout(() => {
  window.location.href = "https://www.congopokemon.store/2026-smarthome/home"; // main dashboard
}, PAGE_TIMEOUT_MS);
window.addEventListener("load", () => clearTimeout(pageTimeout));
['click','keydown','touchstart'].forEach(evt => {
  window.addEventListener(evt, () => clearTimeout(pageTimeout));
});
</script>
</body>
</html>
