<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Home Control iOS 19</title>
<style>
:root {
  --ios-system-bg: #000000; 
  --ios-secondary-bg: #1C1C1E; 
  --ios-active-blue: #32ADE6;
  --ios-label: #FFFFFF; 
  --ios-active-label: #000000;
}
body { 
  font-family: -apple-system, BlinkMacSystemFont, 'SF Pro Display', sans-serif; 
  background: var(--ios-system-bg); 
  color: var(--ios-label); 
  margin:0; 
  padding:40px 24px; 
  display:flex; 
  justify-content:center; 
}
.container { width:100%; max-width:400px; }
h1 { font-size:34px; font-weight:700; margin-bottom:28px; letter-spacing:-0.5px; }
.grid { display:grid; grid-template-columns:1fr 1fr; gap:12px; }
.tile { 
  background: var(--ios-secondary-bg); 
  border-radius:16px; 
  padding:16px; 
  height:100px; 
  display:flex; 
  flex-direction:column; 
  justify-content:space-between; 
  cursor:pointer; 
  text-decoration:none; 
  color: var(--ios-label); 
  transition: transform 0.1s, background 0.2s; 
  backdrop-filter: blur(10px);
  -webkit-backdrop-filter: blur(10px);
}
.tile:active { transform: scale(0.96); }
.icon-wrap { 
  width:36px; height:36px; 
  display:flex; 
  align-items:center; 
  justify-content:center; 
  border-radius:50%; 
  background: rgba(255,255,255,0.1); 
  font-size:20px; 
  color: var(--ios-active-blue); 
  transition: background 0.2s, color 0.2s; 
}
.label { 
  font-weight:600; 
  font-size:15px; 
  text-align:left; 
  color:var(--ios-label); 
  transition:color 0.2s; 
}
.tv-icon { 
  width:24px; height:18px; 
  border:2px solid currentColor; 
  border-radius:2px; 
  position:relative; 
}
.tv-icon::after { 
  content:''; 
  position:absolute; 
  bottom:-4px; 
  left:50%; 
  transform:translateX(-50%); 
  width:6px; 
  height:2px; 
  background:currentColor; 
}
</style>
</head>
<body>
<div class="container">
<h1>Ma maison</h1>
<div class="grid">

<!-- TV -->
<a href="https://www.congopokemon.store/2026-smarthome/tv" class="tile" onclick="return navigateWithTimeout(event, this.href)">
  <div class="icon-wrap"><div class="tv-icon"></div></div>
  <span class="label">T√âL√â SALON</span>
</a>
  
<a href="https://www.congopokemon.store/2026-smarthome/tv" class="tile" onclick="return navigateWithTimeout(event, this.href)">
  <div class="icon-wrap"><div class="tv-icon"></div></div>
  <span class="label">T√âL√â CHAMBRE</span>
</a>

<!-- AC -->
<a href="https://www.congopokemon.store/2026-smarthome/ac" class="tile" onclick="return navigateWithTimeout(event, this.href)">
  <div class="icon-wrap">‚ùÑÔ∏è</div>
  <span class="label">CLIM SALON</span>
</a>
  
<a href="https://www.congopokemon.store/2026-smarthome/ac" class="tile" onclick="return navigateWithTimeout(event, this.href)">
  <div class="icon-wrap">‚ùÑÔ∏è</div>
  <span class="label">CLIM CHAMBRE</span>
</a>

<!-- Lights -->
<a href="https://www.congopokemon.store/2026-smarthome/lights" class="tile" onclick="return navigateWithTimeout(event, this.href)">
  <div class="icon-wrap">üí°</div>
  <span class="label">LUMI√àRES</span>
</a>

<!-- Door -->
<a href="#" class="tile" onclick="toggleDoorChoice(); return false;" role="button">
  <div class="icon-wrap" id="door-icon">üîí</div>
  <span class="label">SERRURE</span>
</a>

<!-- Scenes (iOS-style popup) -->
<a href="#" class="tile" onclick="showSceneSheet(); return false;">
  <div class="icon-wrap">üé¨</div>
  <span class="label">SC√àNES</span>
</a>

</div>
</div>

<script>
// ==================== Navigation ====================
function navigateWithTimeout(event, url) {
  event.preventDefault();
  if(window.pageTimeout) clearTimeout(window.pageTimeout);

  // Simple redirect for ESP32
  window.location.href = url;

  window.pageTimeout = setTimeout(() => {
    window.location.href = "https://www.congopokemon.store/2026-smarthome/home";
  }, 5000);
  return false;
}

// ==================== Door ====================
let doorLocked = true;
function toggleDoorChoice() {
  const overlay = document.createElement('div');
  overlay.style.cssText = `
    position: fixed; inset:0;
    background: rgba(0,0,0,0.4);
    display:flex; align-items:center; justify-content:center;
    z-index:9999; opacity:0; transition: opacity 0.2s;
  `;
  document.body.appendChild(overlay);
  requestAnimationFrame(() => overlay.style.opacity = 1);
  overlay.addEventListener('click', e => { if(e.target===overlay) overlay.remove(); });

  const popup = document.createElement('div');
  popup.style.cssText = `
    background: var(--ios-secondary-bg);
    padding:20px;
    border-radius:16px;
    width:280px;
    text-align:center;
    display:flex;
    flex-direction:column;
    gap:12px;
    box-shadow:0 10px 30px rgba(0,0,0,0.3);
  `;

  const title = document.createElement('div');
  title.textContent = "SERRURE";
  title.style.fontWeight='600';
  title.style.fontSize='18px';
  popup.appendChild(title);

  const msg = document.createElement('div');
  msg.textContent = "Que voulez-vous faire ?";
  msg.style.fontSize='15px';
  msg.style.color='#ccc';
  popup.appendChild(msg);

  const btnContainer = document.createElement('div');
  btnContainer.style.display='flex';
  btnContainer.style.justifyContent='space-between';

  const lockBtn = document.createElement('button');
  lockBtn.textContent="üîí Verrouiller";
  lockBtn.style.cssText=`flex:1;margin-right:6px;padding:10px;border-radius:12px;border:none;background: var(--ios-active-blue); color: var(--ios-active-label); font-weight:600;cursor:pointer;`;
  lockBtn.onclick=()=>{ setDoor(true); overlay.remove(); };

  const unlockBtn = document.createElement('button');
  unlockBtn.textContent="üîì D√©verrouiller";
  unlockBtn.style.cssText=`flex:1;margin-left:6px;padding:10px;border-radius:12px;border:none;background: var(--ios-active-label); color: var(--ios-system-bg); font-weight:600;cursor:pointer;`;
  unlockBtn.onclick=()=>{ setDoor(false); overlay.remove(); };

  btnContainer.appendChild(lockBtn);
  btnContainer.appendChild(unlockBtn);
  popup.appendChild(btnContainer);
  overlay.appendChild(popup);
}

function setDoor(locked) {
  doorLocked = locked;
  const icon = document.getElementById('door-icon');
  icon.textContent = doorLocked ? 'üîí' : 'üîì';
  icon.classList.toggle('unlocked', !doorLocked);
  showToast(doorLocked ? "Verrouill√© üîí" : "D√©verrouill√© üîì");
}

// ==================== Toast ====================
function showToast(message) {
  const popup = document.createElement('div');
  popup.textContent = message;
  popup.style.cssText=`
    position: fixed;
    bottom: 10%;
    left: 50%;
    transform: translateX(-50%);
    background: var(--ios-active-blue);
    color: var(--ios-active-label);
    padding: 12px 24px;
    border-radius: 12px;
    font-weight: 600;
    font-size: 16px;
    z-index: 9999;
    opacity: 0;
    transition: opacity 0.3s ease-in-out;
  `;
  document.body.appendChild(popup);
  requestAnimationFrame(()=> popup.style.opacity=1);
  setTimeout(()=>{ popup.style.opacity=0; setTimeout(()=>popup.remove(),300); },1500);
}

// ==================== Scenes (iOS-style sheet) ====================
const scenes = ["MATIN", "AU REVOIR", "NUIT", "SOIR√âE"];

function showSceneSheet() {
  const overlay = document.createElement('div');
  overlay.style.cssText = `
    position: fixed; inset:0;
    background: rgba(0,0,0,0.3);
    backdrop-filter: blur(6px);
    -webkit-backdrop-filter: blur(6px);
    z-index: 9999;
    opacity: 0;
    transition: opacity 0.25s ease-in-out;
    display: flex;
    align-items: flex-end;
    justify-content: center;
  `;
  document.body.appendChild(overlay);
  requestAnimationFrame(() => overlay.style.opacity = 1);
  overlay.addEventListener('click', e => { if(e.target===overlay) dismissSheet(); });

  const sheet = document.createElement('div');
  sheet.style.cssText = `
    width: 100%;
    max-width: 400px;
    background: var(--ios-secondary-bg);
    border-radius: 20px 20px 0 0;
    padding: 12px 0;
    box-shadow: 0 -4px 30px rgba(0,0,0,0.3);
    display: flex;
    flex-direction: column;
    transform: translateY(100%);
    transition: transform 0.3s ease-out;
  `;

  scenes.forEach(scene => {
    const btn = document.createElement('button');
    btn.textContent = scene;
    btn.style.cssText = `
      background: transparent;
      border: none;
      font-size: 18px;
      font-weight: 600;
      padding: 16px;
      color: var(--ios-label);
      cursor: pointer;
      transition: background 0.2s;
    `;
    btn.onmouseover = () => btn.style.background = 'rgba(255,255,255,0.1)';
    btn.onmouseleave = () => btn.style.background = 'transparent';
    btn.onclick = () => { activateScene(scene); dismissSheet(); };
    sheet.appendChild(btn);

    const divider = document.createElement('div');
    divider.style.height = '1px';
    divider.style.background = 'rgba(255,255,255,0.05)';
    sheet.appendChild(divider);
  });

  const cancelBtn = document.createElement('button');
  cancelBtn.textContent = "Annuler";
  cancelBtn.style.cssText = `
    background: var(--ios-secondary-bg);
    margin-top: 8px;
    margin-bottom: 12px;
    font-size: 18px;
    font-weight: 600;
    padding: 16px;
    border-radius: 16px;
    color: var(--ios-active-blue);
    border: none;
    cursor: pointer;
  `;
  cancelBtn.onclick = dismissSheet;
  sheet.appendChild(cancelBtn);

  overlay.appendChild(sheet);
  requestAnimationFrame(() => sheet.style.transform = 'translateY(0)');

  function dismissSheet() {
    sheet.style.transform = 'translateY(100%)';
    overlay.style.opacity = 0;
    setTimeout(() => overlay.remove(), 300);
  }
}

function activateScene(sceneName) {
  showToast(sceneName + " activ√©e !");
}

// ==================== Page timeout ====================
const PAGE_TIMEOUT_MS=5000;
window.pageTimeout=setTimeout(()=>{ window.location.href="https://www.congopokemon.store/2026-smarthome/home"; }, PAGE_TIMEOUT_MS);
window.addEventListener("load",()=>clearTimeout(window.pageTimeout));
['click','keydown','touchstart'].forEach(evt=>window.addEventListener(evt,()=>clearTimeout(window.pageTimeout)));
</script>
</body>
</html>
